import * as tslib_1 from "tslib";
import { Component, Inject } from '@angular/core';
import { FormGroup, FormControl } from '@angular/forms';
import { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';
import { EventEmitterService } from '../common/calendar-event-emitter.service';
// import {moment} from 'moment';
var CalendarModalComponent = /** @class */ (function () {
    function CalendarModalComponent(dialogRef, eventEmitterService, data) {
        this.dialogRef = dialogRef;
        this.eventEmitterService = eventEmitterService;
        this.data = data;
        this.screenType = "add";
        this.titlePlaceholder = this.data ? "Edit Title" : "Add Title";
        this.locationPlaceholder = this.data ? "Edit Location" : "Add Location";
        this.descriptionPlaceholder = this.data ? "Edit Description" : "Add Description";
        this.addEvents = new FormGroup({
            title: new FormControl(),
            location: new FormControl(),
            description: new FormControl(),
            fromDate: new FormControl(),
            toDate: new FormControl(),
            fromTime: new FormControl(),
            toTime: new FormControl(),
        });
    }
    CalendarModalComponent.prototype.ngOnInit = function () {
        if (this.data) {
            this.assignEventDetails();
        }
    };
    CalendarModalComponent.prototype.assignEventDetails = function () {
        this.screenType = "edit";
        this.addEvents.controls['title'].setValue(this.data.title);
        this.addEvents.controls['location'].setValue(this.data.location);
        this.addEvents.controls['description'].setValue(this.data.description);
        this.addEvents.controls['fromDate'].setValue(this.data.start);
        this.addEvents.controls['toDate'].setValue(this.data.end);
        this.addEvents.controls['fromTime'].setValue(this.data.fromTime);
        this.addEvents.controls['toTime'].setValue(this.data.toTime);
    };
    CalendarModalComponent.prototype.addOrUpdateEvent = function () {
        var tempObject = {
            title: this.addEvents.controls['title'].value,
            description: this.addEvents.controls['description'].value,
            location: this.addEvents.controls['location'].value,
            start: this.addEvents.controls['fromDate'].value,
            end: this.addEvents.controls['toDate'].value,
            fromTime: this.addEvents.controls['fromTime'].value,
            toTime: this.addEvents.controls['toTime'].value
        };
        if (this.data === null) {
            this.eventEmitterService.emitNavChangeEvent('ADD_SAVE_CLICKED', tempObject);
        }
        else {
            this.eventEmitterService.emitNavChangeEvent('EDIT_SAVE_CLICKED', tempObject);
        }
    };
    CalendarModalComponent.prototype.onNoClick = function () {
        this.dialogRef.close();
    };
    CalendarModalComponent.ctorParameters = function () { return [
        { type: MatDialogRef },
        { type: EventEmitterService },
        { type: undefined, decorators: [{ type: Inject, args: [MAT_DIALOG_DATA,] }] }
    ]; };
    CalendarModalComponent = tslib_1.__decorate([
        Component({
            selector: 'app-calendar-modal',
            template: "<!-- <div class=\"modal-dialog\" role=\"document\">\n    <div class=\"modal-content\">\n        <div class=\"modal-header\">\n            <h4 class=\"modal-title\" style=\"font-family: Poppins;\" id=\"exampleModalLabel\">Add Event</h4>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                <span aria-hidden=\"true\">&times;</span>\n            </button>\n        </div>\n        <div class=\"modal-body\">\n\n            <form class=\"example-form\" [formGroup]=\"addEvents\">\n\n                <mat-form-field class=\"example-full-width\" id=\"Add-title-view\"\n                    style=\"font-family: Poppins;width: 95% !important;\">\n                    <input matInput placeholder=\"Add Title\" style=\"font-family: Poppins;\" formControlName=\"title\"\n                        value=\"\">\n                </mat-form-field>\n\n                <div class=\"timeinterval\" id=\"start-end-time\" style=\"display: flex !important;\n    justify-content: space-between !important;align-items: center;\">\n                    <mat-icon aria-hidden=\"false\">access_time</mat-icon>\n                    <mat-form-field class=\"example-full-width\" style=\"width: 22%;font-family: Poppins;\">\n                        <mat-label>Choose a date</mat-label>\n                        <input matInput [matDatepicker]=\"picker\">\n                        <mat-datepicker-toggle matSuffix [for]=\"picker\">\n                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>\n                        </mat-datepicker-toggle>\n                        <mat-datepicker #picker></mat-datepicker>\n                    </mat-form-field>\n\n                    <mat-form-field style=\"width: 16%;\">\n                        <mat-label style=\"font-family: Poppins;\">Start Time</mat-label>\n                        <mat-select style=\"font-family: Poppins;\" name=\"countryString\" [(value)]=\"selectedCountry\">\n                            <mat-option style=\"font-family: Poppins;z-index: 99999999 !important\" value=\"volvo\"\n                                selected>03:00 AM</mat-option>\n                            <mat-option style=\"font-family: Poppins;z-index: 99999999 !important\" value=\"saab\">04:00 AM\n                            </mat-option>\n                            <mat-option style=\"font-family: Poppins;z-index: 99999999 !important\" value=\"mercedes\">\n                                05:00 AM</mat-option>\n                            <mat-option style=\"font-family: Poppins;z-index: 99999999 !important\" value=\"audi\">06:00 AM\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n\n\n                    <mat-form-field style=\"width: 16%;\">\n                        <mat-label style=\"font-family: Poppins;\">End Time</mat-label>\n                        <mat-select style=\"font-family: Poppins;\" name=\"countryString\" [(value)]=\"selectedCountry\">\n                            <mat-option style=\"font-family: Poppins;z-index: 99999999 !important\" value=\"volvo\"\n                                selected>03:00 AM</mat-option>\n                            <mat-option style=\"font-family: Poppins;z-index: 99999999 !important\" value=\"saab\">04:00 AM\n                            </mat-option>\n                            <mat-option style=\"font-family: Poppins;z-index: 99999999 !important\" value=\"mercedes\">\n                                05:00 AM</mat-option>\n                            <mat-option style=\"font-family: Poppins;z-index: 99999999 !important\" value=\"audi\">06:00 AM\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n\n                    <mat-form-field class=\"example-full-width\" style=\"width: 22%;font-family: Poppins;\">\n                        <mat-label>Choose a date</mat-label>\n                        <input matInput [matDatepicker]=\"datepicker\">\n                        <mat-datepicker-toggle matSuffix [for]=\"datepicker\">\n                            <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>\n                        </mat-datepicker-toggle>\n                        <mat-datepicker #datepicker></mat-datepicker>\n                    </mat-form-field>\n                </div>\n\n                <div class=\"header\">\n                    <mat-icon aria-hidden=\"false\">location_on</mat-icon>\n                    <mat-form-field class=\"form-field\">\n                        <input matInput placeholder=\"Add Location\" formControlName=\"location\" value=\"\"\n                            style=\" width: 95% !important;\" />\n                    </mat-form-field>\n                </div>\n\n                <div class=\"header\">\n                    <mat-icon aria-hidden=\"false\">menu</mat-icon>\n                    <mat-form-field class=\"form-field\">\n                        <textarea matInput placeholder=\"Add description\" formControlName=\"description\" value=\"\"\n                            style=\" width: 95% !important;\"></textarea>\n                    </mat-form-field>\n                </div>\n\n            </form>\n\n            <div class=\"modal-footer\">\n                <button type=\"button\" class=\"btn btn-primary\" (click)=\"addEvent()\" data-dismiss=\"modal\">Save</button>\n            </div>\n        </div>\n    </div>\n</div> -->\n\n<!-- <h1 mat-dialog-title>Hi</h1>\n<div mat-dialog-content>\n  <p>What's your favorite animal?</p>\n  <mat-form-field>\n    <input matInput>\n  </mat-form-field>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onNoClick()\">No Thanks</button>\n  <button mat-button [mat-dialog-close]=\"'data'\" cdkFocusInitial>Ok</button>\n</div> -->\n\n<div class=\"titleStyle\">\n    <h1 mat-dialog-title style=\"font-family: Poppins;\">{{titlePlaceholder}}</h1>\n    <mat-icon aria-hidden=\"false\" style=\"cursor: pointer;\" (click)=\"onNoClick()\">close</mat-icon>\n</div>\n<div mat-dialog-content>\n\n    <form class=\"example-form\" [formGroup]=\"addEvents\">\n\n        <mat-form-field class=\"example-full-width\" id=\"Add-title-view\"\n            style=\"font-family: Poppins;width: 95% !important;margin-left: 5%;\">\n            <input matInput placeholder=\"{{titlePlaceholder}}\" style=\"font-family: Poppins;\" formControlName=\"title\">\n        </mat-form-field>\n\n        <div class=\"timeinterval\" id=\"start-end-time\" style=\"display: flex !important;align-items: center;\">\n\n            <mat-icon aria-hidden=\"false\">access_time</mat-icon>\n            <div style=\"display: flex !important;\njustify-content: space-between !important;align-items: center;margin-left: 2%;padding-right: 2%;\">\n                <mat-form-field class=\"example-full-width\" style=\"width: 22%;font-family: Poppins;\">\n                    <mat-label>Start date</mat-label>\n                    <input matInput formControlName=\"fromDate\" [matDatepicker]=\"picker\">\n                    <mat-datepicker-toggle matSuffix [for]=\"picker\">\n                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>\n                    </mat-datepicker-toggle>\n                    <mat-datepicker #picker></mat-datepicker>\n                </mat-form-field>\n\n                <div class=\"md-form\">\n                    <input type=\"time\" id=\"input\" formControlName=\"fromTime\" class=\"form-control\" mdbInput />\n                </div>\n\n\n                <div class=\"md-form\">\n                    <input type=\"time\" id=\"input\" formControlName=\"toTime\" class=\"form-control\" mdbInput />\n                </div>\n\n                <mat-form-field class=\"example-full-width\" style=\"width: 22%;font-family: Poppins;\">\n                    <mat-label>End date</mat-label>\n                    <input [min]=\"addEvents.controls['fromDate'].value\" matInput formControlName=\"toDate\"\n                        [matDatepicker]=\"datepicker\">\n                    <mat-datepicker-toggle matSuffix [for]=\"datepicker\">\n                        <mat-icon matDatepickerToggleIcon>keyboard_arrow_down</mat-icon>\n                    </mat-datepicker-toggle>\n                    <mat-datepicker #datepicker></mat-datepicker>\n                </mat-form-field>\n            </div>\n\n        </div>\n\n        <div class=\"header\">\n            <mat-icon aria-hidden=\"false\">location_on</mat-icon>\n            <mat-form-field class=\"form-field\" style=\"margin-left: 2%;\">\n                <input matInput placeholder=\"{{locationPlaceholder}}\" formControlName=\"location\"\n                    style=\" width: 95% !important;\" />\n            </mat-form-field>\n        </div>\n\n        <div class=\"header\">\n            <mat-icon aria-hidden=\"false\">menu</mat-icon>\n            <mat-form-field class=\"form-field\" id=\"formField\" style=\"margin-left: 2%;\">\n                <textarea matInput placeholder=\"{{descriptionPlaceholder}}\" formControlName=\"description\"\n                    style=\" width: 95% !important;height: 21px;\"></textarea>\n            </mat-form-field>\n        </div>\n    </form>\n</div>\n<div mat-dialog-actions style=\"margin-left: 91%;\" *ngIf=\"addEvents.controls['description'].value!==''\n&& addEvents.controls['description'].value!==null &&\naddEvents.controls['location'].value!==''&& \naddEvents.controls['location'].value!==null &&\naddEvents.controls['title'].value!==''&& \naddEvents.controls['title'].value!==null &&\naddEvents.controls['fromDate'].value!==''&&\naddEvents.controls['fromDate'].value!==null &&\naddEvents.controls['toDate'].value!==''\n&& addEvents.controls['toDate'].value!==null &&\naddEvents.controls['fromTime'].value!==''&& \naddEvents.controls['fromTime'].value!==null &&\naddEvents.controls['toTime'].value!==''\n&&  addEvents.controls['toTime'].value!==null &&\naddEvents.controls['fromDate'].value <=\naddEvents.controls['toDate'].value &&\naddEvents.controls['fromTime'].value <\naddEvents.controls['toTime'].value\n\n\">\n    <button type=\"button\" class=\"btn btn-primary\" [mat-dialog-close]=\"'data'\" cdkFocusInitial\n        (click)=\"addOrUpdateEvent()\">Save</button>\n</div>",
            styles: [".cdk-overlay-container{z-index:1127}.form-field{font-family:Poppins;width:95%!important}.header{margin-top:4%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.titleStyle{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}"]
        }),
        tslib_1.__param(2, Inject(MAT_DIALOG_DATA))
    ], CalendarModalComponent);
    return CalendarModalComponent;
}());
export { CalendarModalComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXItbW9kYWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmVvLWNhbGVuZGFyLyIsInNvdXJjZXMiOlsibW9kdWxlcy9jYWxlbmRhci1tb2RhbC9jYWxlbmRhci1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBQ3JFLE9BQU8sRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEQsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsZUFBZSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDcEYsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDL0UsaUNBQWlDO0FBT2pDO0lBRUUsZ0NBQW1CLFNBQStDLEVBQ3pELG1CQUF3QyxFQUNmLElBQVM7UUFGeEIsY0FBUyxHQUFULFNBQVMsQ0FBc0M7UUFDekQsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQUNmLFNBQUksR0FBSixJQUFJLENBQUs7UUFJM0MsZUFBVSxHQUFHLEtBQUssQ0FBQztRQUNuQixxQkFBZ0IsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztRQUMxRCx3QkFBbUIsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQztRQUNuRSwyQkFBc0IsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsaUJBQWlCLENBQUM7UUFxQjVFLGNBQVMsR0FBRyxJQUFJLFNBQVMsQ0FBQztZQUN4QixLQUFLLEVBQUUsSUFBSSxXQUFXLEVBQUU7WUFDeEIsUUFBUSxFQUFFLElBQUksV0FBVyxFQUFFO1lBQzNCLFdBQVcsRUFB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QjtnREFDOUMsTUFBTSxTQUFDLGVBQWU7O0lBSmQsc0JBQXNCO1FBTGxDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxvQkFBb0I7WUFDOUIsMmxVQUE4Qzs7U0FFL0MsQ0FBQztRQUtHLG1CQUFBLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQTtPQUpmLHNCQUFzQixDQWlFbEM7SUFBRCw2QkFBQztDQUFBLEFBakVELElBaUVDO1NBakVZLHNCQUFzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbmplY3QsIE9uQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUdyb3VwLCBGb3JtQ29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IE1hdERpYWxvZywgTWF0RGlhbG9nUmVmLCBNQVRfRElBTE9HX0RBVEEgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9kaWFsb2cnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi9jYWxlbmRhci1ldmVudC1lbWl0dGVyLnNlcnZpY2UnO1xuLy8gaW1wb3J0IHttb21lbnR9IGZyb20gJ21vbWVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FwcC1jYWxlbmRhci1tb2RhbCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9jYWxlbmRhci1tb2RhbC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2NhbGVuZGFyLW1vZGFsLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgQ2FsZW5kYXJNb2RhbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgY29uc3RydWN0b3IocHVibGljIGRpYWxvZ1JlZjogTWF0RGlhbG9nUmVmPENhbGVuZGFyTW9kYWxDb21wb25lbnQ+LFxuICAgIHB1YmxpYyBldmVudEVtaXR0ZXJTZXJ2aWNlOiBFdmVudEVtaXR0ZXJTZXJ2aWNlLFxuICAgIEBJbmplY3QoTUFUX0RJQUxPR19EQVRBKSBwdWJsaWMgZGF0YTogYW55XG4gICkgeyBcbiAgICBcbiAgfVxuICBzY3JlZW5UeXBlID0gXCJhZGRcIjtcbiAgdGl0bGVQbGFjZWhvbGRlciA9IHRoaXMuZGF0YSA/IFwiRWRpdCBUaXRsZVwiIDogXCJBZGQgVGl0bGVcIjtcbiAgbG9jYXRpb25QbGFjZWhvbGRlciA9IHRoaXMuZGF0YSA/IFwiRWRpdCBMb2NhdGlvblwiIDogXCJBZGQgTG9jYXRpb25cIjtcbiAgZGVzY3JpcHRpb25QbGFjZWhvbGRlciA9IHRoaXMuZGF0YSA/IFwiRWRpdCBEZXNjcmlwdGlvblwiIDogXCJBZGQgRGVzY3JpcHRpb25cIjtcblxuICBuZ09uSW5pdCgpIHtcbiAgICBcbiAgICBpZih0aGlzLmRhdGEpe1xuICAgICAgdGhpcy5hc3NpZ25FdmVudERldGFpbHMoKTtcbiAgICB9XG5cbiAgfVxuXG4gIGFzc2lnbkV2ZW50RGV0YWlscygpe1xuICAgIHRoaXMuc2NyZWVuVHlwZSA9IFwiZWRpdFwiO1xuICAgIHRoaXMuYWRkRXZlbnRzLmNvbnRyb2xzWyd0aXRsZSddLnNldFZhbHVlKHRoaXMuZGF0YS50aXRsZSk7XG4gICAgdGhpcy5hZGRFdmVudHMuY29udHJvbHNbJ2xvY2F0aW9uJ10uc2V0VmFsdWUodGhpcy5kYXRhLmxvY2F0aW9uKTtcbiAgICB0aGlzLmFkZEV2ZW50cy5jb250cm9sc1snZGVzY3JpcHRpb24nXS5zZXRWYWx1ZSh0aGlzLmRhdGEuZGVzY3JpcHRpb24pO1xuICAgIHRoaXMuYWRkRXZlbnRzLmNvbnRyb2xzWydmcm9tRGF0ZSddLnNldFZhbHVlKHRoaXMuZGF0YS5zdGFydCk7XG4gICAgdGhpcy5hZGRFdmVudHMuY29udHJvbHNbJ3RvRGF0ZSddLnNldFZhbHVlKHRoaXMuZGF0YS5lbmQpO1xuICAgIHRoaXMuYWRkRXZlbnRzLmNvbnRyb2xzWydmcm9tVGltZSddLnNldFZhbHVlKHRoaXMuZGF0YS5mcm9tVGltZSk7XG4gICAgdGhpcy5hZGRFdmVudHMuY29udHJvbHNbJ3RvVGltZSddLnNldFZhbHVlKHRoaXMuZGF0YS50b1RpbWUpO1xuICB9XG5cbiAgYWRkRXZlbnRzID0gbmV3IEZvcm1Hcm91cCh7XG4gICAgdGl0bGU6IG5ldyBGb3JtQ29udHJvbCgpLFxuICAgIGxvY2F0aW9uOiBuZXcgRm9ybUNvbnRyb2woKSxcbiAgICBkZXNjcmlwdGlvbjogbmV3IEZvcm1Db250cm9sKCksXG4gICAgZnJvbURhdGU6IG5ldyBGb3JtQ29udHJvbCgpLFxuICAgIHRvRGF0ZTogbmV3IEZvcm1Db250cm9sKCksXG4gICAgZnJvbVRpbWU6IG5ldyBGb3JtQ29udHJvbCgpLFxuICAgIHRvVGltZTogbmV3IEZvcm1Db250cm9sKCksXG4gIH0pO1xuXG4gIGFkZE9yVXBkYXRlRXZlbnQoKSB7XG4gICAgbGV0IHRlbXBPYmplY3QgPSB7XG4gICAgICB0aXRsZTogdGhpcy5hZGRFdmVudHMuY29udHJvbHNbJ3RpdGxlJ10udmFsdWUsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5hZGRFdmVudHMuY29udHJvbHNbJ2Rlc2NyaXB0aW9uJ10udmFsdWUsXG4gICAgICBsb2NhdGlvbjogdGhpcy5hZGRFdmVudHMuY29udHJvbHNbJ2xvY2F0aW9uJ10udmFsdWUsXG4gICAgICBzdGFydDogdGhpcy5hZGRFdmVudHMuY29udHJvbHNbJ2Zyb21EYXRlJ10udmFsdWUsXG4gICAgICBlbmQ6IHRoaXMuYWRkRXZlbnRzLmNvbnRyb2xzWyd0b0RhdGUnXS52YWx1ZSxcbiAgICAgIGZyb21UaW1lOiB0aGlzLmFkZEV2ZW50cy5jb250cm9sc1snZnJvbVRpbWUnXS52YWx1ZSxcbiAgICAgIHRvVGltZTogdGhpcy5hZGRFdmVudHMuY29udHJvbHNbJ3RvVGltZSddLnZhbHVlXG4gICAgfTtcbiAgICBpZih0aGlzLmRhdGEgPT09IG51bGwpe1xuICAgICAgdGhpcy5ldmVudEVtaXR0ZXJTZXJ2aWNlLmVtaXROYXZDaGFuZ2VFdmVudCgnQUREX1NBVkVfQ0xJQ0tFRCcsIHRlbXBPYmplY3QpO1xuICAgIH1lbHNlIHtcbiAgICAgIHRoaXMuZXZlbnRFbWl0dGVyU2VydmljZS5lbWl0TmF2Q2hhbmdlRXZlbnQoJ0VESVRfU0FWRV9DTElDS0VEJywgdGVtcE9iamVjdCk7XG4gICAgfVxuICAgIFxuICB9XG5cbiAgb25Ob0NsaWNrKCk6IHZvaWQge1xuICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKCk7XG4gIH1cblxuXG59XG4iXX0=